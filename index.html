<!DOCTYPE html>
<html>
<body>

<h1>{{.Title}}</h1>

<div id="map" style="width:100%;height:800px;"></div>

<script>



function myMap() {
var mapProp= {
    center:new google.maps.LatLng(51.508742,-0.120850),
    zoom:5,
};
var map=new google.maps.Map(document.getElementById("map"),mapProp);

var infowindow = new google.maps.InfoWindow();





{{range $key, $value := .Planes}}

var test = {lat: {{$value.Latitude}}, lng: {{$value.Longitude}}};
var marker = new google.maps.Marker({position: test, icon: "http://images2.imagebam.com/99/a1/1e/d32ae41027898954.png", map: map});


var callsign = {{$value.Callsign}} 
var icao24 = {{$value.Icao24}}
var airport = {{$value.OriginCountry}}
var baroalt = {{$value.BaroAltitude}}


var content = icao24 + '<br>' + callsign + '<br>'+ airport

google.maps.event.addListener(marker, 'click', (function(marker, content, infowindow) {
  return function(){
  infowindow.setContent(content);
  infowindow.open(map,marker);
  }
  })(marker, content, infowindow));


{{end}}


/*function rotateMarker(selector, degree){
     $('img[src="img/customMarker.png#'+selector+'"]').css({
         'transform': 'rotate('+degree+'deg)'
     });*/
}

</script>

<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB_hmUd2JkX-GVnVPaL4EEll3_iVgX5g_Q&callback=myMap">
</script>



</body>
</html>